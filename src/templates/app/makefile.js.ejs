include .env

default: run

run:
	docker-compose up -d

restart:
	docker-compose restart

in:
	docker-compose exec node /bin/sh

stop:
	docker-compose stop

clean:
	docker-compose down

test:
	docker-compose exec node npm test

test-file:
	docker-compose exec node npm run test:file --filter $(path)

stage-run:
	docker-compose -f docker-compose.stage.yml up -d

stage-in:
	docker-compose -f docker-compose.stage.yml exec node /bin/sh

stage-stop:
	docker-compose -f docker-compose.stage.yml stop

stage-clean:
	docker-compose -f docker-compose.stage.yml down

install:
	docker-compose -f common-services.yml run --rm install

build:
	docker-compose -f common-services.yml run --rm build
